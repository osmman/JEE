<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <h:head>
        <c:choose>
            <c:when test="#{videoBean.existsVideo}">
                <title>Video - #{videoBean.videoName}</title>
            </c:when>
            <c:otherwise>
                <title>Video not found </title>
            </c:otherwise>
        </c:choose>
    </h:head>
    <h:body>
        <script src="https://code.jquery.com/jquery.min.js" type="application/javascript"></script>
        <script src="resources/js/chatwebsocket.js"></script>
        <c:choose>
            <c:when test="#{videoBean.existsVideo}">
                <h:outputText value="Video name: #{videoBean.videoName}" />
                <br/>
                <h:outputText value="Author: #{videoBean.autohorName}" />
                <br/>
                <video id="myVideo" controls="controls">
                    <source src="video?videoid=#{param['videoid']}" type="video/mp4" />
                </video>
            </c:when>
            <c:otherwise>
                <h:outputText value="Video not found"/>
            </c:otherwise>
        </c:choose>
        <br/>
        <h:link value="First video " outcome="video" >
            <f:param name="videoid" value="1" />
        </h:link>
        <h:link value="Previous video " outcome="video" >
            <f:param name="videoid" value="#{ param['videoid'] - 1}" />
        </h:link>
        <h:link value="Next video " outcome="video" >
            <f:param name="videoid" value="#{ param['videoid'] + 1}" />
        </h:link>

        <h:panelGroup id="chat">
            <h:form id="formmessage" rendered="#{not empty authenticator.currentUser}" >
                <h:inputTextarea id="message" rows="4"/> 
                <br/>
                <h:commandButton value="Send" onclick="send()" >
                    <f:ajax render=":chat" />
                </h:commandButton>
            </h:form>
        </h:panelGroup>

    </h:body>
</html>

